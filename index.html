<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>REVOS War Room</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #080c10; --surface: #0d1117; --surface2: #111820; --border: #1e2d3d;
    --green: #00ff88; --yellow: #ffcc00; --red: #ff3b5c; --blue: #00aaff; --purple: #a855f7;
    --text: #e2e8f0; --muted: #5a7085;
    --font-mono: 'Space Mono', monospace; --font-display: 'Syne', sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: var(--font-display); background: var(--bg); color: var(--text); min-height: 100vh; }
  body::before { content:''; position:fixed; inset:0; background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,136,.012) 2px,rgba(0,255,136,.012) 4px); pointer-events:none; z-index:1000; }

  /* HEADER */
  .header { border-bottom:1px solid var(--border); padding:14px 28px; display:flex; align-items:center; justify-content:space-between; background:var(--surface); position:sticky; top:0; z-index:100; }
  .logo { font-family:var(--font-mono); font-size:12px; font-weight:700; color:var(--green); letter-spacing:4px; }
  .logo span { color:var(--muted); }
  .hdr-right { display:flex; align-items:center; gap:10px; }
  .live-badge { font-family:var(--font-mono); font-size:9px; color:var(--muted); border:1px solid var(--border); padding:4px 10px; border-radius:4px; display:flex; align-items:center; gap:5px; }
  .live-dot { width:6px; height:6px; background:var(--green); border-radius:50%; animation:pulse 2s infinite; }
  .meeting-btn { font-family:var(--font-mono); font-size:10px; letter-spacing:2px; background:rgba(168,85,247,.12); border:1px solid rgba(168,85,247,.4); color:var(--purple); padding:6px 14px; border-radius:4px; cursor:pointer; transition:all .2s; white-space:nowrap; }
  .meeting-btn:hover { background:rgba(168,85,247,.22); }
  @keyframes pulse { 0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(0,255,136,.4)} 50%{opacity:.6;box-shadow:0 0 0 5px rgba(0,255,136,0)} }

  /* LAYOUT */
  .main { display:grid; grid-template-columns:1fr 300px; min-height:calc(100vh - 53px); }
  .left { padding:22px 26px; border-right:1px solid var(--border); overflow-y:auto; }
  .right { padding:18px; background:var(--surface); overflow-y:auto; }

  /* TABS */
  .tabs { display:flex; gap:1px; margin-bottom:22px; border-bottom:1px solid var(--border); overflow-x:auto; }
  .tab { font-family:var(--font-mono); font-size:9px; letter-spacing:2px; text-transform:uppercase; padding:9px 16px; cursor:pointer; color:var(--muted); border-bottom:2px solid transparent; transition:all .2s; background:none; border-top:none; border-left:none; border-right:none; white-space:nowrap; }
  .tab:hover { color:var(--text); }
  .tab.active { color:var(--green); border-bottom-color:var(--green); }
  .tab-content { display:none; }
  .tab-content.active { display:block; }

  /* PHASE BANNER */
  .phase-banner { background:linear-gradient(135deg,rgba(0,255,136,.07),rgba(0,170,255,.03)); border:1px solid rgba(0,255,136,.18); border-radius:8px; padding:13px 18px; margin-bottom:22px; display:flex; align-items:center; gap:14px; }
  .ph-num { font-family:var(--font-mono); font-size:30px; font-weight:700; color:var(--green); opacity:.3; line-height:1; }
  .ph-name { font-size:14px; font-weight:800; }
  .ph-desc { font-size:11px; color:var(--muted); margin-top:3px; }
  .ph-right { margin-left:auto; text-align:right; }
  .ph-wlabel { font-family:var(--font-mono); font-size:9px; color:var(--muted); letter-spacing:2px; }
  .ph-wval { font-family:var(--font-mono); font-size:20px; color:var(--text); font-weight:700; }

  /* SECTION LABEL */
  .slabel { font-family:var(--font-mono); font-size:9px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-bottom:10px; display:flex; align-items:center; gap:10px; }
  .slabel::after { content:''; flex:1; height:1px; background:var(--border); }

  /* HEALTH GRID */
  .hgrid { display:grid; grid-template-columns:repeat(3,1fr); gap:9px; margin-bottom:24px; }
  .hcard { background:var(--surface2); border:1px solid var(--border); border-radius:7px; padding:13px; position:relative; overflow:hidden; }
  .hcard::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:var(--sc,var(--muted)); }
  .hcard.green{--sc:var(--green);border-color:rgba(0,255,136,.12)} .hcard.yellow{--sc:var(--yellow);border-color:rgba(255,204,0,.12)} .hcard.red{--sc:var(--red);border-color:rgba(255,59,92,.12)}
  .hcard-n { font-family:var(--font-mono); font-size:9px; color:var(--muted); margin-bottom:5px; }
  .hcard-v { font-size:22px; font-weight:800; line-height:1; margin-bottom:2px; }
  .hcard-t { font-family:var(--font-mono); font-size:9px; color:var(--muted); }
  .sbadge { position:absolute; top:11px; right:11px; font-family:var(--font-mono); font-size:8px; letter-spacing:1px; padding:2px 6px; border-radius:3px; font-weight:700; }
  .sbadge.green{background:rgba(0,255,136,.1);color:var(--green)} .sbadge.yellow{background:rgba(255,204,0,.1);color:var(--yellow)} .sbadge.red{background:rgba(255,59,92,.1);color:var(--red)}

  /* STREAKS */
  .sgrid { display:grid; grid-template-columns:repeat(3,1fr); gap:9px; margin-bottom:24px; }
  .scard { background:var(--surface2); border:1px solid var(--border); border-radius:7px; padding:13px; text-align:center; }
  .scard-name { font-size:13px; font-weight:800; margin-bottom:2px; }
  .scard-role { font-family:var(--font-mono); font-size:8px; color:var(--muted); letter-spacing:2px; margin-bottom:8px; }
  .scard-num { font-family:var(--font-mono); font-size:32px; font-weight:700; line-height:1; margin-bottom:2px; }
  .scard-label { font-family:var(--font-mono); font-size:8px; color:var(--muted); }
  .sdots { display:flex; gap:3px; justify-content:center; margin-top:9px; flex-wrap:wrap; }
  .sdot { width:9px; height:9px; border-radius:2px; }

  /* FOUNDER CARDS */
  .fgrid { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:24px; }
  .fcard { background:var(--surface2); border:1px solid var(--border); border-radius:9px; padding:16px; }
  .fcard-name { font-size:14px; font-weight:800; margin-bottom:2px; }
  .fcard-role { font-family:var(--font-mono); font-size:8px; color:var(--green); letter-spacing:2px; margin-bottom:12px; }
  .mrow { display:flex; justify-content:space-between; align-items:center; padding:6px 0; border-bottom:1px solid var(--border); font-size:11px; }
  .mrow:last-child{border-bottom:none} .ml{color:var(--muted)} .mv{font-family:var(--font-mono);font-weight:700}
  .mv.green{color:var(--green)} .mv.red{color:var(--red)} .mv.yellow{color:var(--yellow)}

  /* TREND CHART */
  .trend-wrap { background:var(--surface2); border:1px solid var(--border); border-radius:9px; padding:16px; margin-bottom:24px; }
  .chart-hdr { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
  .chart-title { font-size:12px; font-weight:700; }
  .cleg { display:flex; gap:12px; }
  .leg { display:flex; align-items:center; gap:4px; font-family:var(--font-mono); font-size:8px; color:var(--muted); }
  .leg-dot { width:7px; height:7px; border-radius:50%; }
  .chart-area { display:flex; align-items:flex-end; gap:6px; height:90px; }
  .bgrp { flex:1; display:flex; gap:2px; align-items:flex-end; }
  .bar { flex:1; border-radius:2px 2px 0 0; transition:height .5s; cursor:pointer; position:relative; min-height:3px; }
  .bar:hover::after { content:attr(data-v); position:absolute; top:-20px; left:50%; transform:translateX(-50%); font-family:var(--font-mono); font-size:8px; color:var(--text); background:var(--surface); border:1px solid var(--border); padding:2px 5px; border-radius:3px; white-space:nowrap; z-index:10; }
  .bar.f{background:var(--green)} .bar.l{background:var(--blue)} .bar.c{background:var(--yellow)}
  .cwks { display:flex; gap:6px; margin-top:5px; }
  .wlbl { flex:1; text-align:center; font-family:var(--font-mono); font-size:8px; color:var(--muted); }

  /* ROADMAP */
  .rw-sel { display:flex; gap:5px; flex-wrap:wrap; margin-bottom:18px; }
  .rw-btn { font-family:var(--font-mono); font-size:9px; padding:5px 11px; border:1px solid var(--border); border-radius:4px; background:none; color:var(--muted); cursor:pointer; transition:all .2s; }
  .rw-btn:hover{border-color:var(--green);color:var(--text)} .rw-btn.active{border-color:var(--green);color:var(--green);background:rgba(0,255,136,.08)}
  .rm-card { background:var(--surface2); border:1px solid var(--border); border-radius:9px; padding:18px; }
  .rm-hdr { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
  .rm-title { font-size:15px; font-weight:800; }
  .rm-phase { font-family:var(--font-mono); font-size:8px; color:var(--muted); letter-spacing:2px; margin-top:2px; }
  .rm-obj { font-size:11px; color:var(--muted); margin-bottom:18px; padding:9px 13px; background:rgba(0,255,136,.05); border-left:2px solid var(--green); border-radius:0 4px 4px 0; line-height:1.5; }
  .rm-role-sec { margin-bottom:14px; }
  .rm-role-hdr { font-family:var(--font-mono); font-size:9px; letter-spacing:2px; margin-bottom:8px; padding-bottom:5px; border-bottom:1px solid var(--border); }
  .rm-role-hdr.f{color:var(--green)} .rm-role-hdr.l{color:var(--blue)} .rm-role-hdr.c{color:var(--yellow)}
  .rm-item { display:flex; align-items:flex-start; gap:9px; padding:7px 0; border-bottom:1px solid rgba(30,45,61,.5); font-size:12px; cursor:pointer; }
  .rm-item:last-child{border-bottom:none}
  .rm-chk { width:15px; height:15px; border:1px solid var(--border); border-radius:3px; flex-shrink:0; display:flex; align-items:center; justify-content:center; font-size:9px; transition:all .2s; margin-top:1px; }
  .rm-item.done .rm-chk{background:rgba(0,255,136,.15);border-color:var(--green);color:var(--green)}
  .rm-item.done .rm-txt{text-decoration:line-through;color:var(--muted)}
  .rm-txt { flex:1; line-height:1.4; }
  .blk-badge { font-family:var(--font-mono); font-size:8px; background:rgba(255,59,92,.1); color:var(--red); border:1px solid rgba(255,59,92,.2); padding:2px 6px; border-radius:3px; flex-shrink:0; }
  .prog-wrap { background:var(--border); border-radius:4px; height:4px; margin:10px 0 16px; }
  .prog-fill { background:var(--green); height:4px; border-radius:4px; transition:width .5s; }

  /* PIPELINE */
  .pipe-hdr { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
  .pipe-board { display:flex; gap:5px; overflow-x:auto; padding-bottom:4px; }
  .pipe-col { flex:0 0 185px; background:var(--surface2); border:1px solid var(--border); border-radius:7px; padding:10px; }
  .pipe-col-hdr { font-family:var(--font-mono); font-size:8px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:9px; display:flex; justify-content:space-between; }
  .pipe-col-ct { background:var(--border); border-radius:10px; padding:1px 6px; font-size:8px; }
  .deal-card { background:var(--surface); border:1px solid var(--border); border-radius:5px; padding:9px 10px; margin-bottom:7px; cursor:pointer; transition:border-color .2s; }
  .deal-card:hover{border-color:rgba(0,255,136,.3)}
  .deal-name { font-size:12px; font-weight:700; margin-bottom:2px; }
  .deal-contact { font-size:10px; color:var(--muted); margin-bottom:5px; }
  .deal-ftr { display:flex; justify-content:space-between; align-items:center; }
  .deal-days { font-family:var(--font-mono); font-size:8px; }
  .deal-days.fresh{color:var(--green)} .deal-days.warn{color:var(--yellow)} .deal-days.stale{color:var(--red)}
  .deal-next { font-size:9px; color:var(--muted); margin-top:4px; font-style:italic; }
  .add-deal-btn { width:100%; background:none; border:1px dashed var(--border); border-radius:5px; padding:7px; color:var(--muted); font-family:var(--font-mono); font-size:9px; cursor:pointer; transition:all .2s; margin-top:3px; }
  .add-deal-btn:hover{border-color:var(--green);color:var(--green)}

  /* BLOCKERS LOG */
  .blk-item { background:var(--surface2); border:1px solid var(--border); border-radius:7px; padding:13px; margin-bottom:9px; }
  .blk-hdr { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:7px; }
  .blk-from { font-family:var(--font-mono); font-size:9px; letter-spacing:1px; }
  .blk-from.Filipe{color:var(--green)} .blk-from.Loa{color:var(--blue)} .blk-from.Clinton{color:var(--yellow)}
  .blk-date { font-family:var(--font-mono); font-size:8px; color:var(--muted); }
  .blk-txt { font-size:12px; line-height:1.5; margin-bottom:9px; }
  .blk-actions { display:flex; gap:7px; align-items:center; }
  .blk-res-btn { font-family:var(--font-mono); font-size:8px; letter-spacing:1px; background:rgba(0,255,136,.08); border:1px solid rgba(0,255,136,.25); color:var(--green); padding:5px 11px; border-radius:4px; cursor:pointer; transition:all .2s; }
  .blk-res-btn:hover{background:rgba(0,255,136,.18)}
  .blk-resolved { font-family:var(--font-mono); font-size:9px; color:var(--green); }
  .blk-note { flex:1; background:var(--surface); border:1px solid var(--border); border-radius:4px; padding:5px 9px; color:var(--text); font-size:11px; font-family:var(--font-display); max-width:220px; }
  .blk-note:focus{outline:none;border-color:var(--green)}

  /* REPORTS */
  .rep-card { background:var(--surface2); border:1px solid var(--border); border-radius:7px; padding:13px; margin-bottom:9px; animation:fadeIn .3s; }
  @keyframes fadeIn{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}
  .rep-hdr { display:flex; justify-content:space-between; align-items:center; margin-bottom:9px; }
  .rep-role { font-size:13px; font-weight:800; }
  .rep-role.Filipe{color:var(--green)} .rep-role.Loa{color:var(--blue)} .rep-role.Clinton{color:var(--yellow)}
  .rep-time { font-family:var(--font-mono); font-size:8px; color:var(--muted); }
  .rfl { font-family:var(--font-mono); font-size:8px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; margin-bottom:2px; }
  .rfv { font-size:12px; line-height:1.5; margin-bottom:7px; }

  /* FORM */
  .rep-form { background:var(--surface2); border:1px solid var(--border); border-radius:9px; padding:20px; }
  .form-row { margin-bottom:13px; }
  .form-lbl { font-family:var(--font-mono); font-size:8px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; display:block; margin-bottom:6px; }
  .form-ctrl { width:100%; background:var(--surface); border:1px solid var(--border); border-radius:5px; padding:8px 11px; color:var(--text); font-family:var(--font-display); font-size:13px; transition:border-color .2s; resize:vertical; }
  .form-ctrl:focus{outline:none;border-color:var(--green)}
  select.form-ctrl{appearance:none;cursor:pointer}
  .btn-submit { width:100%; background:var(--green); color:#000; border:none; padding:12px; border-radius:5px; font-family:var(--font-mono); font-size:11px; font-weight:700; letter-spacing:3px; cursor:pointer; text-transform:uppercase; transition:all .2s; margin-top:5px; }
  .btn-submit:hover{background:#00cc6a;transform:translateY(-1px)}

  /* PARTNERS */
  .pslots { display:flex; gap:7px; margin-bottom:14px; }
  .pslot { flex:1; height:36px; border:1px dashed var(--border); border-radius:5px; display:flex; align-items:center; justify-content:center; font-family:var(--font-mono); font-size:8px; color:var(--muted); transition:all .3s; }
  .pslot.filled{background:rgba(0,255,136,.07);border:1px solid var(--green);color:var(--green);font-weight:700}
  .chk-item { display:flex; align-items:center; gap:9px; padding:7px 0; border-bottom:1px solid var(--border); font-size:12px; }
  .chk-item:last-child{border-bottom:none} .chk-icon{font-size:12px;flex-shrink:0}
  .chk-text.done{color:var(--muted);text-decoration:line-through}

  /* RIGHT PANEL */
  .rp-title { font-family:var(--font-mono); font-size:9px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; margin-bottom:10px; margin-top:18px; }
  .rp-title:first-child{margin-top:0}
  .alert-item { display:flex; gap:9px; padding:8px 0; border-bottom:1px solid var(--border); }
  .alert-item:last-child{border-bottom:none}
  .alert-icon{font-size:12px;flex-shrink:0;margin-top:1px}
  .alert-txt{font-size:11px;line-height:1.4}
  .alert-meta{font-family:var(--font-mono);font-size:8px;margin-top:2px}
  .wknav { display:flex; align-items:center; gap:7px; margin-bottom:12px; }
  .wknav button { background:var(--surface2); border:1px solid var(--border); color:var(--text); padding:3px 10px; border-radius:4px; cursor:pointer; font-family:var(--font-mono); font-size:10px; transition:all .2s; }
  .wknav button:hover{border-color:var(--green);color:var(--green)}
  .wknav-lbl { flex:1; text-align:center; font-family:var(--font-mono); font-size:10px; color:var(--green); font-weight:700; }
  .cm-block { margin-bottom:12px; }
  .cm-role { font-family:var(--font-mono); font-size:8px; letter-spacing:2px; color:var(--muted); margin-bottom:6px; }
  .cm-item { display:flex; align-items:flex-start; gap:7px; padding:6px 8px; background:var(--surface2); border:1px solid var(--border); border-radius:4px; margin-bottom:4px; font-size:11px; cursor:pointer; }
  .cm-item:hover{border-color:rgba(0,255,136,.3)}
  .cm-item input[type="checkbox"]{width:12px;height:12px;accent-color:var(--green);cursor:pointer;flex-shrink:0;margin-top:1px}
  .cm-txt.done{text-decoration:line-through;color:var(--muted)}

  /* MEETING MODAL */
  .modal-ov { position:fixed; inset:0; background:rgba(0,0,0,.88); z-index:500; display:none; align-items:center; justify-content:center; }
  .modal-ov.active{display:flex}
  .modal { background:var(--surface); border:1px solid rgba(168,85,247,.3); border-radius:12px; padding:26px; width:580px; max-width:95vw; max-height:90vh; overflow-y:auto; }
  .modal-close { float:right; background:none; border:none; color:var(--muted); cursor:pointer; font-size:17px; }
  .modal-title { font-size:18px; font-weight:800; margin-bottom:3px; }
  .modal-sub { font-family:var(--font-mono); font-size:9px; color:var(--muted); letter-spacing:2px; margin-bottom:20px; }
  .meet-prog { display:flex; gap:4px; margin-bottom:20px; }
  .meet-seg { flex:1; height:5px; border-radius:3px; background:var(--border); transition:background .3s; }
  .meet-seg.active{background:var(--purple)} .meet-seg.done{background:rgba(168,85,247,.3)}
  .meet-phase { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:16px 18px; margin-bottom:10px; cursor:pointer; transition:border-color .2s; }
  .meet-phase:hover{border-color:rgba(168,85,247,.3)}
  .meet-phase.active{border-color:var(--purple);background:rgba(168,85,247,.05)}
  .meet-phase.done{opacity:.45}
  .mp-hdr { display:flex; justify-content:space-between; align-items:center; margin-bottom:5px; }
  .mp-name { font-size:13px; font-weight:700; }
  .mp-alloc { font-family:var(--font-mono); font-size:9px; color:var(--muted); }
  .mp-cd { font-family:var(--font-mono); font-size:22px; font-weight:700; color:var(--purple); margin-bottom:5px; }
  .mp-desc { font-size:11px; color:var(--muted); line-height:1.5; margin-bottom:7px; }
  .mp-rule { font-size:11px; color:var(--muted); padding:2px 0; }
  .mp-rule::before{content:'‚Üí ';color:var(--purple)}
  .meet-ctrls { display:flex; gap:8px; margin-top:18px; }
  .meet-btn { flex:1; padding:11px; border-radius:5px; font-family:var(--font-mono); font-size:10px; letter-spacing:2px; cursor:pointer; transition:all .2s; border:none; }
  .btn-start{background:var(--purple);color:#fff} .btn-start:hover{background:#9333ea}
  .btn-skip{background:var(--surface2);color:var(--muted);border:1px solid var(--border) !important}
  .btn-skip:hover{color:var(--text)} .btn-reset{background:none;color:var(--muted);border:1px solid var(--border) !important}

  /* PARTNER/DEAL MODAL */
  .sm-modal { background:var(--surface); border:1px solid var(--border); border-radius:11px; padding:24px; width:440px; max-width:95vw; max-height:90vh; overflow-y:auto; }
  .stage-opts { display:flex; flex-wrap:wrap; gap:5px; }
  .sopt { padding:5px 11px; border:1px solid var(--border); border-radius:4px; font-family:var(--font-mono); font-size:8px; cursor:pointer; color:var(--muted); transition:all .2s; background:none; }
  .sopt:hover,.sopt.active{border-color:var(--green);color:var(--green);background:rgba(0,255,136,.07)}

  /* MISC */
  .btn-add { background:rgba(0,255,136,.07); border:1px solid rgba(0,255,136,.25); color:var(--green); padding:7px 14px; border-radius:5px; cursor:pointer; font-family:var(--font-mono); font-size:9px; letter-spacing:2px; transition:all .2s; }
  .btn-add:hover{background:rgba(0,255,136,.15)}
  .btn-del { background:none; border:none; color:var(--muted); cursor:pointer; font-size:12px; padding:0 3px; transition:color .2s; }
  .btn-del:hover{color:var(--red)}
  .empty-st { text-align:center; padding:26px; color:var(--muted); font-family:var(--font-mono); font-size:10px; }
  .empty-ico { font-size:24px; margin-bottom:9px; opacity:.3; }
  .toast { position:fixed; bottom:18px; right:18px; background:var(--surface); border:1px solid var(--green); border-radius:7px; padding:11px 16px; font-family:var(--font-mono); font-size:10px; color:var(--green); z-index:2000; transform:translateY(60px); opacity:0; transition:all .3s; }
  .toast.show{transform:translateY(0);opacity:1}

  @media(max-width:900px){.main{grid-template-columns:1fr}.right{border-top:1px solid var(--border)}.hgrid,.sgrid,.fgrid{grid-template-columns:repeat(2,1fr)}}
  @media(max-width:540px){.hgrid,.sgrid,.fgrid{grid-template-columns:1fr}.header{padding:10px 14px}.left,.right{padding:14px}}
</style>
</head>
<body>

<div class="header">
  <div class="logo">REVOS <span>/ WAR ROOM</span></div>
  <div class="hdr-right">
    <span id="hdr-date" style="font-family:var(--font-mono);font-size:9px;color:var(--muted);"></span>
    <button class="meeting-btn" onclick="openMeeting()">‚ö° MONDAY MEETING</button>
    <div class="live-badge"><span class="live-dot"></span>LIVE</div>
  </div>
</div>

<div class="main">
  <div class="left">
    <div class="phase-banner">
      <div class="ph-num" id="ph-num">1</div>
      <div><div class="ph-name" id="ph-name">Foundation</div><div class="ph-desc" id="ph-desc">Define category. Build proof. First demonstration.</div></div>
      <div class="ph-right"><div class="ph-wlabel">WEEK</div><div class="ph-wval" id="ph-week">‚Äî</div></div>
    </div>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('dashboard',this)">Dashboard</button>
      <button class="tab" onclick="switchTab('roadmap',this)">Roadmap</button>
      <button class="tab" onclick="switchTab('pipeline',this)">Pipeline</button>
      <button class="tab" onclick="switchTab('blockers',this)">Blockers</button>
      <button class="tab" onclick="switchTab('reports',this)">Reports</button>
      <button class="tab" onclick="switchTab('submit',this)">Submit</button>
      <button class="tab" onclick="switchTab('partners',this)">Partners</button>
    </div>

    <!-- DASHBOARD -->
    <div id="tab-dashboard" class="tab-content active">
      <div class="slabel">Company Health</div>
      <div class="hgrid" id="health-grid"></div>
      <div class="slabel">Accountability Streaks</div>
      <div class="sgrid" id="streak-grid"></div>
      <div class="slabel">Founder Scorecards</div>
      <div class="fgrid" id="founder-grid"></div>
      <div class="slabel">Weekly Output Trend</div>
      <div class="trend-wrap">
        <div class="chart-hdr">
          <div class="chart-title">Reports Per Week</div>
          <div class="cleg">
            <div class="leg"><div class="leg-dot" style="background:var(--green)"></div>Filipe</div>
            <div class="leg"><div class="leg-dot" style="background:var(--blue)"></div>Loa</div>
            <div class="leg"><div class="leg-dot" style="background:var(--yellow)"></div>Clinton</div>
          </div>
        </div>
        <div class="chart-area" id="chart-area"></div>
        <div class="cwks" id="chart-weeks"></div>
      </div>
    </div>

    <!-- ROADMAP -->
    <div id="tab-roadmap" class="tab-content">
      <div class="rw-sel" id="rw-sel"></div>
      <div id="rm-content"></div>
    </div>

    <!-- PIPELINE -->
    <div id="tab-pipeline" class="tab-content">
      <div class="pipe-hdr">
        <div><div style="font-size:15px;font-weight:800;">Deal Pipeline</div><div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);margin-top:2px;">Red = not touched in 5+ days. Keep every deal warm.</div></div>
        <button class="btn-add" onclick="openDealModal(null,null)">+ ADD DEAL</button>
      </div>
      <div class="pipe-board" id="pipe-board"></div>
    </div>

    <!-- BLOCKERS -->
    <div id="tab-blockers" class="tab-content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
        <div><div style="font-size:15px;font-weight:800;">Blocker Resolution Log</div><div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);margin-top:2px;">Every blocker must have an owner and deadline.</div></div>
        <div style="display:flex;gap:7px;">
          <button class="btn-add" id="bfilt-open" onclick="filterBlockers('open')">Open</button>
          <button class="btn-add" id="bfilt-all" onclick="filterBlockers('all')" style="opacity:.4">All</button>
        </div>
      </div>
      <div id="blockers-log"></div>
    </div>

    <!-- REPORTS -->
    <div id="tab-reports" class="tab-content"><div id="reports-feed"></div></div>

    <!-- SUBMIT -->
    <div id="tab-submit" class="tab-content">
      <div class="rep-form">
        <div class="form-row"><label class="form-lbl">Your Role</label>
          <select id="f-role" class="form-ctrl">
            <option value="Filipe">Filipe ‚Äî CRO (Revenue)</option>
            <option value="Loa">Loa ‚Äî CCO (Market Authority)</option>
            <option value="Clinton">Clinton ‚Äî COO (Operations)</option>
          </select>
        </div>
        <div class="form-row"><label class="form-lbl">Outputs Shipped (what now exists in the world?)</label><textarea id="f-out" class="form-ctrl" rows="3" placeholder="e.g. Ran 10 discovery calls, Updated pricing deck v2..."></textarea></div>
        <div class="form-row"><label class="form-lbl">Learnings (Observation ‚Üí Meaning)</label><textarea id="f-learn" class="form-ctrl" rows="2" placeholder="e.g. Founders hate forecasting ‚Üí Pain is embarrassment, not accuracy"></textarea></div>
        <div class="form-row"><label class="form-lbl">Blockers (Problem ‚Üí Who must solve ‚Üí By when)</label><textarea id="f-blk" class="form-ctrl" rows="2" placeholder="e.g. Demo confusing ‚Üí Loa ‚Üí Wednesday"></textarea></div>
        <div class="form-row"><label class="form-lbl">Key Metrics This Week</label><textarea id="f-met" class="form-ctrl" rows="2" placeholder="e.g. 27 outbound convos, 11 discovery calls, 2 offers made"></textarea></div>
        <div class="form-row"><label class="form-lbl">Next Week Commitments (3 max ‚Äî deliverables only)</label><textarea id="f-com" class="form-ctrl" rows="3" placeholder="Homepage live with pipeline diagram&#10;10 discovery calls booked&#10;Manual REVOS analysis delivered"></textarea></div>
        <button class="btn-submit" onclick="submitReport()">SUBMIT WEEKLY REPORT ‚Üí</button>
      </div>
    </div>

    <!-- PARTNERS -->
    <div id="tab-partners" class="tab-content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <div><div style="font-size:15px;font-weight:800;">Design Partners</div><div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);margin-top:2px;">5 signed = engineers hired. Not before.</div></div>
        <button class="btn-add" onclick="openPartnerModal()">+ ADD</button>
      </div>
      <div class="pslots" id="pslots"></div>
      <div id="plist"></div>
      <div style="height:20px;"></div>
      <div class="slabel">Engineer Hire Readiness</div>
      <div id="launch-chk"></div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <div class="rp-title">‚ö° Alerts</div>
    <div style="background:var(--surface2);border:1px solid var(--border);border-radius:7px;padding:12px;"><div id="alerts-list"></div></div>
    <div class="rp-title">Commitments</div>
    <div class="wknav">
      <button onclick="shiftWeek(-1)">‚Üê</button>
      <div class="wknav-lbl" id="wknav-lbl">WEEK 1</div>
      <button onclick="shiftWeek(1)">‚Üí</button>
    </div>
    <div id="commits-panel"></div>
    <div class="rp-title" style="margin-top:20px;">üöß Open Blockers</div>
    <div id="sidebar-blk"></div>
  </div>
</div>

<!-- MEETING MODAL -->
<div class="modal-ov" id="meet-modal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('meet-modal')">‚úï</button>
    <div class="modal-title">Monday Founder Council</div>
    <div class="modal-sub">45 MINUTES ¬∑ NON-OPTIONAL ¬∑ EXECUTION ONLY</div>
    <div class="meet-prog" id="meet-prog"></div>
    <div id="meet-phases"></div>
    <div class="meet-ctrls">
      <button class="meet-btn btn-start" id="meet-start-btn" onclick="meetingAction()">START TIMER</button>
      <button class="meet-btn btn-skip" onclick="skipPhase()">SKIP ‚Üí</button>
      <button class="meet-btn btn-reset" onclick="resetMeeting()">RESET</button>
    </div>
  </div>
</div>

<!-- PARTNER MODAL -->
<div class="modal-ov" id="partner-modal">
  <div class="sm-modal">
    <button class="modal-close" onclick="closeModal('partner-modal')">‚úï</button>
    <div style="font-size:17px;font-weight:800;margin-bottom:16px;">Add Design Partner</div>
    <div class="form-row"><label class="form-lbl">Company Name</label><input type="text" id="p-name" class="form-ctrl" placeholder="e.g. Acme Corp"></div>
    <div class="form-row"><label class="form-lbl">Contact Name</label><input type="text" id="p-contact" class="form-ctrl" placeholder="e.g. Jane Smith"></div>
    <div class="form-row"><label class="form-lbl">Stage</label>
      <div class="stage-opts" id="partner-stage-opts">
        <button class="sopt" onclick="selStage(this,'Outreach')">Outreach</button>
        <button class="sopt" onclick="selStage(this,'Discovery Call')">Discovery Call</button>
        <button class="sopt" onclick="selStage(this,'Offer Sent')">Offer Sent</button>
        <button class="sopt" onclick="selStage(this,'Signed')">Signed</button>
        <button class="sopt" onclick="selStage(this,'Active')">Active</button>
      </div>
    </div>
    <div class="form-row"><label class="form-lbl">Notes</label><textarea id="p-notes" class="form-ctrl" rows="2" placeholder="Pain points, next action..."></textarea></div>
    <button class="btn-submit" onclick="savePartner()">SAVE ‚Üí</button>
  </div>
</div>

<!-- DEAL MODAL -->
<div class="modal-ov" id="deal-modal">
  <div class="sm-modal">
    <button class="modal-close" onclick="closeModal('deal-modal')">‚úï</button>
    <div style="font-size:17px;font-weight:800;margin-bottom:16px;" id="deal-modal-title">Add Deal</div>
    <div class="form-row"><label class="form-lbl">Company Name</label><input type="text" id="d-name" class="form-ctrl" placeholder="e.g. Summit Plumbing"></div>
    <div class="form-row"><label class="form-lbl">Contact</label><input type="text" id="d-contact" class="form-ctrl" placeholder="e.g. Bob Smith, Owner"></div>
    <div class="form-row"><label class="form-lbl">Stage</label>
      <div class="stage-opts" id="deal-stage-opts">
        <button class="sopt" onclick="selDealStage(this,'Outreach')">Outreach</button>
        <button class="sopt" onclick="selDealStage(this,'First Call')">First Call</button>
        <button class="sopt" onclick="selDealStage(this,'Discovery')">Discovery</button>
        <button class="sopt" onclick="selDealStage(this,'Offer Sent')">Offer Sent</button>
        <button class="sopt" onclick="selDealStage(this,'Negotiating')">Negotiating</button>
        <button class="sopt" onclick="selDealStage(this,'Closed Won')">Closed Won</button>
        <button class="sopt" onclick="selDealStage(this,'Closed Lost')">Closed Lost</button>
      </div>
    </div>
    <div class="form-row"><label class="form-lbl">Next Action</label><input type="text" id="d-next" class="form-ctrl" placeholder="e.g. Follow-up call Thursday 2pm"></div>
    <div class="form-row"><label class="form-lbl">Notes</label><textarea id="d-notes" class="form-ctrl" rows="2" placeholder="Key context, objections heard..."></textarea></div>
    <input type="hidden" id="d-edit-id">
    <button class="btn-submit" onclick="saveDeal()">SAVE DEAL ‚Üí</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CONFIG
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const SUPA_URL = "https://zmfmvaedfrdwldhtfjmm.supabase.co";
const SUPA_KEY = "sb_publishable_Wgamoaf3a1dlzdH9UFc9Pg_ziGt7Cwh";
const db = supabase.createClient(SUPA_URL, SUPA_KEY);

let allReports=[], allPartners=[], allDeals=[], allBlockers=[];
let weekOffset=0, bFilter='open', rmWeek=1;
let selPStage='', selDStage='';
let launchStart=null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ROADMAP DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const RM = {
  1:{title:"Category Definition",phase:1,blocker:true,obj:"If this isn't clear ‚Üí nothing converts. Everyone must explain REVOS in one conversation.",
    f:["Write ICP definition (specific company profile)","Record pain narrative script (5-min explanation)","Draft pricing hypothesis ‚Äî 3 tiers","Build objection list ‚Äî top 25"],
    l:["Write category positioning statement","Sketch homepage wireframe (structure not design)","Write problem recognition copy (above the fold)","Create REVOS explainer diagram"],
    c:["Document enforcement logic v1 (how a deal becomes valid)","Draft required deal evidence checklist","List all data objects the system must track"]},
  2:{title:"The Proof",phase:1,blocker:true,obj:"Must prove REVOS is real, not theory.",
    f:["Schedule 10 founder interviews","Finalize discovery call script","Draft demo narrative outline"],
    l:["Get first landing page live (no perfection)","Create visual pipeline enforcement graphic","Write founder pain case story page"],
    c:["Build mock workflow (manual spreadsheet version)","Create example scorecard output","Write onboarding checklist v1"]},
  3:{title:"First Demonstration",phase:1,blocker:true,obj:"Must show a working concept in a live conversation.",
    f:["Run 5 live problem diagnosis calls","Record reactions + objections","Refine offer language from feedback"],
    l:["Create demo slides","Design visual dashboard mockups","Record 90-second explanation video"],
    c:["Run manual REVOS simulation on sample pipeline","Produce first compliance score output","Document exact logic steps taken"]},
  4:{title:"Design Partner Acquisition I",phase:2,blocker:false,obj:"Target: First signed company. Sell BEFORE software exists.",
    f:["Complete 50 outbound conversations","Close 1 design partner","Build ROI calculator"],
    l:["Create case-style explainer page","Record demo walkthrough video","Design objection response visuals"],
    c:["Draft customer onboarding framework","Create implementation timeline","Build required customer data sheet"]},
  5:{title:"Design Partner Acquisition II",phase:2,blocker:false,obj:"Deepen outreach. Move first partner into implementation.",
    f:["50 additional outbound conversations","Confirm first partner is active","Test ROI calculator with real numbers"],
    l:["Refine demo based on call feedback","Update landing page messaging","Create onboarding welcome assets"],
    c:["Start first partner implementation","Document real onboarding steps","Create week 1 partner check-in template"]},
  6:{title:"Repeatability I",phase:2,blocker:false,obj:"Target: 3 design partners total. Prove the sales motion repeats.",
    f:["Close 2 more companies (total 3)","Build referral script","Validate pricing with real conversations"],
    l:["Publish 3 LinkedIn authority posts","Draft RevOps education article","Create sales deck v2"],
    c:["Write standard onboarding SOP","Create weekly reporting format template","Build adoption tracking method"]},
  7:{title:"Repeatability II",phase:2,blocker:false,obj:"Solidify 3 partners. System must run without founder babysitting.",
    f:["Deliver 3 ROI updates to active partners","Test referral script with 5 contacts","Document what's working in the sales script"],
    l:["Publish 2 more authority posts","Launch email nurture sequence (3 emails)","Update sales deck with case data"],
    c:["Confirm onboarding SOP works without you","Produce 3 weekly compliance reports","Reduce onboarding time vs week 5"]},
  8:{title:"Operational Proof",phase:2,blocker:true,obj:"Show measurable improvement. Investors and future customers need this.",
    f:["Gather before/after metrics from all partners","Record 2+ video testimonials","Write case study interview notes"],
    l:["Publish 2 case study pages","Create social proof assets library","Design investor-ready results slide"],
    c:["Produce first formal compliance report","Show forecast improvement data","Document manual process that will become software"]},
  9:{title:"Authority Position I",phase:3,blocker:false,obj:"Market must start to believe this category exists.",
    f:["Host live webinar presentation","Draft investor narrative","Close partner #4"],
    l:["Launch authority landing page","Publish category-defining article","Release demo video v2"],
    c:["Write automation spec (what engineers will build)","Draft data schema v1","List all integration requirements"]},
  10:{title:"Authority Position II",phase:3,blocker:false,obj:"Amplify signal. More conversations. More evidence.",
    f:["Run 5 additional investor conversations","Collect 3 more testimonials","Document competitor comparison"],
    l:["Publish 3 social proof posts","Run webinar replay campaign","Create comparison landing page"],
    c:["Review data schema with engineering candidate","Finalize integration requirements","Write API spec v1"]},
  11:{title:"Launch Preparation",phase:3,blocker:false,obj:"Get everything ready. 5 partners within reach.",
    f:["Close partner #5","Lock final pricing","Document complete sales process"],
    l:["Get full website live","Write launch announcement content","Complete sales assets library"],
    c:["Finalize engineering PRD","Complete implementation handbook","Write customer success playbook v1"]},
  12:{title:"Launch Ready",phase:3,blocker:true,obj:"5 paying design partners. Before/after proven. Onboarding repeatable. Engineers hired.",
    f:["Confirm all 5 design partners are active","Deliver final sales process documentation","Prepare investor update deck"],
    l:["Full website live and tested","All sales assets complete","Launch sequence ready to execute"],
    c:["Engineering hiring process started","All SOPs handed to incoming team","Customer success system operational"]}
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function init() {
  document.getElementById('hdr-date').textContent = new Date().toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric',year:'numeric'});
  const s=localStorage.getItem('revos_start');
  launchStart = s?new Date(s):new Date();
  if(!s) localStorage.setItem('revos_start',launchStart.toISOString());
  rmWeek=getCW();
  updatePhase(); updateWkNav();
  renderRmSel();
  await Promise.all([loadR(),loadP(),loadD(),loadB()]);
  renderAll();
  subscribe();
  initMeeting();
}

const getCW=()=>Math.max(1,Math.min(12,Math.ceil((new Date()-launchStart)/(7*24*60*60*1000))));

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LOADERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function loadR(){try{const{data,error}=await db.from('founder_reports').select('*').order('created_at',{ascending:false});if(error)throw error;allReports=data||[];}catch(e){allReports=[];}}
async function loadP(){try{const{data,error}=await db.from('design_partners').select('*').order('created_at',{ascending:false});if(error)throw error;allPartners=data||[];}catch(e){allPartners=[];}}
async function loadD(){try{const{data,error}=await db.from('deals').select('*').order('last_touched',{ascending:false});if(error)throw error;allDeals=data||[];}catch(e){allDeals=[];}}
async function loadB(){try{const{data,error}=await db.from('blockers').select('*').order('created_at',{ascending:false});if(error)throw error;allBlockers=data||[];}catch(e){allBlockers=[];}}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// RENDER ALL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAll(){renderHealth();renderStreaks();renderFounders();renderChart();renderRm();renderPipe();renderBlog();renderReports();renderPartners();renderLaunch();renderAlerts();renderCommits();renderSideBlk();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PHASE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updatePhase(){
  const w=getCW();
  let ph=1,n='Foundation',d='Define category. Build proof. First demonstration.';
  if(w>=4&&w<=8){ph=2;n='Market Entry';d='Sell BEFORE software exists. Close first design partners.';}
  if(w>=9){ph=3;n='Pre-Software Validation';d='Prove demand. Prepare engineering spec. Launch ready.';}
  document.getElementById('ph-num').textContent=ph;
  document.getElementById('ph-name').textContent=n;
  document.getElementById('ph-desc').textContent=d;
  document.getElementById('ph-week').textContent=w+'/12';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HEALTH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderHealth(){
  const cw=getCW();
  const tw=allReports.filter(r=>r.week===cw);
  const signed=allPartners.filter(p=>p.stage==='Signed'||p.stage==='Active').length;
  const active=allDeals.filter(d=>d.stage!=='Closed Won'&&d.stage!=='Closed Lost').length;
  const closed=allDeals.filter(d=>d.stage==='Closed Won').length;
  const openB=allBlockers.filter(b=>!b.resolved).length;
  const metrics=[
    {n:'Reports This Week',v:tw.length+'/3',t:'3 required',s:tw.length>=3?'green':tw.length>=1?'yellow':'red'},
    {n:'Design Partners',v:signed+'/5',t:'5 to hire engineers',s:signed>=5?'green':signed>=2?'yellow':'red'},
    {n:'Active Deals',v:active,t:'pipeline prospects',s:active>=10?'green':active>=3?'yellow':'red'},
    {n:'Closed Won',v:closed,t:'revenue proof',s:closed>=5?'green':closed>=1?'yellow':'red'},
    {n:'Open Blockers',v:openB,t:'target: 0',s:openB===0?'green':openB<=2?'yellow':'red'},
    {n:'Launch Week',v:cw+'/12',t:'pre-launch timeline',s:cw<=10?'green':cw<=12?'yellow':'red'},
  ];
  const lbs={green:'‚óè ON TRACK',yellow:'‚óè AT RISK',red:'‚óè BEHIND'};
  document.getElementById('health-grid').innerHTML=metrics.map(m=>`
    <div class="hcard ${m.s}"><div class="sbadge ${m.s}">${lbs[m.s]}</div>
    <div class="hcard-n">${m.n}</div><div class="hcard-v">${m.v}</div><div class="hcard-t">${m.t}</div></div>
  `).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STREAKS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function calcStreak(role){
  const cw=getCW(); let s=0;
  for(let w=cw;w>=1;w--){if(allReports.some(r=>r.role===role&&r.week===w))s++;else break;}
  return s;
}

function renderStreaks(){
  const cw=getCW();
  const founders=[['Filipe','CRO'],['Loa','CCO'],['Clinton','COO']];
  document.getElementById('streak-grid').innerHTML=founders.map(([f,r])=>{
    const streak=calcStreak(f);
    const col=streak>=4?'var(--green)':streak>=2?'var(--yellow)':'var(--red)';
    const weeks=[]; let missed=0;
    for(let w=cw;w>=Math.max(1,cw-7);w--){const filed=allReports.some(rp=>rp.role===f&&rp.week===w);weeks.unshift({w,filed});}
    const dots=weeks.map(w=>`<div class="sdot" style="background:${w.filed?'var(--green)':'var(--red)'}" title="W${w.w}:${w.filed?'‚úì':'‚úó'}"></div>`).join('');
    const missedCt=weeks.filter(w=>!w.filed).length;
    return `
      <div class="scard">
        <div class="scard-name">${f}</div><div class="scard-role">${r}</div>
        <div class="scard-num" style="color:${col}">${streak}</div>
        <div class="scard-label">WEEK STREAK</div>
        ${missedCt>=2?`<div style="font-family:var(--font-mono);font-size:8px;color:var(--red);margin-top:5px;">‚ö† ${missedCt} MISSED</div>`:''}
        <div class="sdots">${dots}</div>
      </div>
    `;
  }).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FOUNDER CARDS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderFounders(){
  const cw=getCW();
  const filed=r=>allReports.some(rp=>rp.role===r&&rp.week===cw);
  const founders=[
    {n:'Filipe',r:'CRO ¬∑ REVENUE',ms:[
      {l:'Week Report',v:filed('Filipe')?'‚úì Filed':'‚úó Missing',c:filed('Filipe')?'green':'red'},
      {l:'Streak',v:calcStreak('Filipe')+'wk',c:calcStreak('Filipe')>=3?'green':calcStreak('Filipe')>=1?'yellow':'red'},
      {l:'Active Deals',v:allDeals.filter(d=>d.stage!=='Closed Won'&&d.stage!=='Closed Lost').length,c:''},
      {l:'Closed Won',v:allDeals.filter(d=>d.stage==='Closed Won').length,c:'green'},
    ]},
    {n:'Loa',r:'CCO ¬∑ MARKET',ms:[
      {l:'Week Report',v:filed('Loa')?'‚úì Filed':'‚úó Missing',c:filed('Loa')?'green':'red'},
      {l:'Streak',v:calcStreak('Loa')+'wk',c:calcStreak('Loa')>=3?'green':calcStreak('Loa')>=1?'yellow':'red'},
      {l:'Partners Signed',v:allPartners.filter(p=>p.stage==='Signed'||p.stage==='Active').length,c:'green'},
      {l:'Open Blockers',v:allBlockers.filter(b=>!b.resolved).length,c:allBlockers.filter(b=>!b.resolved).length===0?'green':'yellow'},
    ]},
    {n:'Clinton',r:'COO ¬∑ OPS',ms:[
      {l:'Week Report',v:filed('Clinton')?'‚úì Filed':'‚úó Missing',c:filed('Clinton')?'green':'red'},
      {l:'Streak',v:calcStreak('Clinton')+'wk',c:calcStreak('Clinton')>=3?'green':calcStreak('Clinton')>=1?'yellow':'red'},
      {l:'Blockers Resolved',v:allBlockers.filter(b=>b.resolved).length,c:'green'},
      {l:'Open Blockers',v:allBlockers.filter(b=>!b.resolved).length,c:allBlockers.filter(b=>!b.resolved).length===0?'green':'red'},
    ]}
  ];
  document.getElementById('founder-grid').innerHTML=founders.map(f=>`
    <div class="fcard"><div class="fcard-name">${f.n}</div><div class="fcard-role">${f.r}</div>
    ${f.ms.map(m=>`<div class="mrow"><span class="ml">${m.l}</span><span class="mv ${m.c}">${m.v}</span></div>`).join('')}
    </div>
  `).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CHART
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderChart(){
  const cw=getCW(); const st=Math.max(1,cw-5); const wks=[];
  for(let w=st;w<=cw;w++) wks.push(w);
  const byw={};
  allReports.forEach(r=>{const w=r.week||1;if(!byw[w])byw[w]={Filipe:0,Loa:0,Clinton:0};if(byw[w][r.role]!==undefined)byw[w][r.role]++;});
  const mx=Math.max(1,...wks.flatMap(w=>Object.values(byw[w]||{})));
  const h=v=>Math.max(3,(v/mx)*85);
  document.getElementById('chart-area').innerHTML=wks.map(w=>{const d=byw[w]||{Filipe:0,Loa:0,Clinton:0};return`<div class="bgrp"><div class="bar f" style="height:${h(d.Filipe)}px" data-v="F:${d.Filipe}"></div><div class="bar l" style="height:${h(d.Loa)}px" data-v="L:${d.Loa}"></div><div class="bar c" style="height:${h(d.Clinton)}px" data-v="C:${d.Clinton}"></div></div>`;}).join('');
  document.getElementById('chart-weeks').innerHTML=wks.map(w=>`<div class="wlbl">W${w}</div>`).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ROADMAP
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderRmSel(){
  const cw=getCW();
  document.getElementById('rw-sel').innerHTML=Array.from({length:12},(_,i)=>i+1).map(w=>`
    <button class="rw-btn ${w===rmWeek?'active':''}" onclick="setRmWeek(${w},this)">W${w}${w===cw?' ‚Üê':''}</button>
  `).join('');
}

function setRmWeek(w,btn){
  rmWeek=w;
  document.querySelectorAll('.rw-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderRm();
}

function renderRm(){
  const d=RM[rmWeek]; const cw=getCW();
  const phN={1:'Phase 1 ‚Äî Foundation',2:'Phase 2 ‚Äî Market Entry',3:'Phase 3 ‚Äî Pre-Software Validation'};
  const statusLabel=rmWeek<cw?'PAST':rmWeek===cw?'CURRENT WEEK':'UPCOMING';
  const done=countRmDone(rmWeek); const total=d.f.length+d.l.length+d.c.length; const pct=Math.round((done/total)*100);
  const colPct=pct>=80?'var(--green)':pct>=40?'var(--yellow)':'var(--red)';

  const secHTML=(role,items,cls,label)=>{
    const key=`revos_rm_w${rmWeek}_${role}`;
    const chk=JSON.parse(localStorage.getItem(key)||'{}');
    return `<div class="rm-role-sec"><div class="rm-role-hdr ${cls}">${label}</div>
    ${items.map((it,i)=>`
      <div class="rm-item ${chk[i]?'done':''}" onclick="toggleRm('${key}',${i},this)">
        <div class="rm-chk">${chk[i]?'‚úì':''}</div>
        <div class="rm-txt">${it}</div>
        ${d.blocker&&!chk[i]?'<div class="blk-badge">BLOCKER</div>':''}
      </div>
    `).join('')}</div>`;
  };

  document.getElementById('rm-content').innerHTML=`
    <div class="rm-card">
      <div class="rm-hdr">
        <div><div class="rm-title">Week ${rmWeek}: ${d.title}</div><div class="rm-phase">${phN[d.phase]} ¬∑ ${statusLabel}</div></div>
        <div style="font-family:var(--font-mono);font-size:18px;font-weight:700;color:${colPct}">${pct}%</div>
      </div>
      <div class="rm-obj">${d.obj}</div>
      <div class="prog-wrap"><div class="prog-fill" style="width:${pct}%"></div></div>
      ${secHTML('f',d.f,'f','FILIPE ‚Äî CRO')}
      ${secHTML('l',d.l,'l','LOA ‚Äî CCO')}
      ${secHTML('c',d.c,'c','CLINTON ‚Äî COO')}
    </div>
  `;
}

function countRmDone(w){
  let done=0;
  ['f','l','c'].forEach(r=>{const k=`revos_rm_w${w}_${r}`;const ch=JSON.parse(localStorage.getItem(k)||'{}');done+=Object.values(ch).filter(Boolean).length;});
  return done;
}

function toggleRm(key,i,el){
  const ch=JSON.parse(localStorage.getItem(key)||'{}');
  ch[i]=!ch[i];
  localStorage.setItem(key,JSON.stringify(ch));
  renderRm();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PIPELINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const STAGES=['Outreach','First Call','Discovery','Offer Sent','Negotiating','Closed Won'];
function renderPipe(){
  document.getElementById('pipe-board').innerHTML=STAGES.map(st=>{
    const deals=allDeals.filter(d=>d.stage===st);
    return `<div class="pipe-col">
      <div class="pipe-col-hdr"><span>${st}</span><span class="pipe-col-ct">${deals.length}</span></div>
      ${deals.map(d=>{
        const days=d.last_touched?Math.floor((new Date()-new Date(d.last_touched))/(864e5)):999;
        const fc=days<=2?'fresh':days<=5?'warn':'stale';
        const fl=days===0?'today':days===1?'yesterday':`${days}d ago`;
        return `<div class="deal-card" onclick="openDealModal(${d.id},'${st}')">
          <div class="deal-name">${d.name}</div>
          ${d.contact?`<div class="deal-contact">${d.contact}</div>`:''}
          <div class="deal-ftr"><span class="deal-days ${fc}">Touched: ${fl}</span><button class="btn-del" onclick="event.stopPropagation();delDeal(${d.id})">‚úï</button></div>
          ${d.next_action?`<div class="deal-next">Next: ${d.next_action}</div>`:''}
        </div>`;
      }).join('')}
      <button class="add-deal-btn" onclick="openDealModal(null,'${st}')">+ add deal</button>
    </div>`;
  }).join('');
}

function openDealModal(id,stage){
  document.getElementById('deal-modal').classList.add('active');
  document.getElementById('d-edit-id').value=id||'';
  document.getElementById('deal-modal-title').textContent=id?'Edit Deal':'Add Deal';
  if(id){const d=allDeals.find(x=>x.id==id);if(d){document.getElementById('d-name').value=d.name||'';document.getElementById('d-contact').value=d.contact||'';document.getElementById('d-next').value=d.next_action||'';document.getElementById('d-notes').value=d.notes||'';selDStage=d.stage||'';}}
  else{['d-name','d-contact','d-next','d-notes'].forEach(i=>document.getElementById(i).value='');selDStage=stage||'';}
  document.querySelectorAll('#deal-stage-opts .sopt').forEach(b=>b.classList.toggle('active',b.textContent===selDStage));
}

function selDealStage(el,s){selDStage=s;document.querySelectorAll('#deal-stage-opts .sopt').forEach(b=>b.classList.remove('active'));el.classList.add('active');}

async function saveDeal(){
  const name=document.getElementById('d-name').value.trim();
  if(!name){showToast('‚ö† Name required');return;}
  if(!selDStage){showToast('‚ö† Select stage');return;}
  const eid=document.getElementById('d-edit-id').value;
  const pl={name,stage:selDStage,contact:document.getElementById('d-contact').value,next_action:document.getElementById('d-next').value,notes:document.getElementById('d-notes').value,last_touched:new Date().toISOString()};
  try{if(eid)await db.from('deals').update(pl).eq('id',eid);else await db.from('deals').insert([pl]);showToast('‚úì Deal saved');closeModal('deal-modal');await loadD();renderPipe();renderHealth();renderFounders();}catch(e){showToast('Error: '+e.message);}
}

async function delDeal(id){try{await db.from('deals').delete().eq('id',id);await loadD();renderPipe();renderHealth();showToast('Removed');}catch(e){showToast('Error: '+e.message);}}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BLOCKERS LOG
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderBlog(){
  const items=bFilter==='open'?allBlockers.filter(b=>!b.resolved):allBlockers;
  document.getElementById('blockers-log').innerHTML=items.length?items.map(b=>`
    <div class="blk-item">
      <div class="blk-hdr">
        <div class="blk-from ${b.filed_by}">${(b.filed_by||'').toUpperCase()} ‚Üí ${b.assigned_to||'?'} by ${b.deadline||'?'}</div>
        <div class="blk-date">${b.created_at?new Date(b.created_at).toLocaleDateString('en-US',{month:'short',day:'numeric'}):'‚Äî'} ¬∑ W${b.week||'?'}</div>
      </div>
      <div class="blk-txt">${b.description||''}</div>
      <div class="blk-actions">
        ${b.resolved?`<div class="blk-resolved">‚úì Resolved${b.resolution?' ‚Äî '+b.resolution:''}</div>`:`
          <input class="blk-note" id="bres-${b.id}" placeholder="Resolution note...">
          <button class="blk-res-btn" onclick="resolveBlk(${b.id})">MARK RESOLVED</button>
        `}
      </div>
    </div>
  `).join(''):`<div class="empty-st"><div class="empty-ico">‚úÖ</div>${bFilter==='open'?'No open blockers':'No blockers logged'}</div>`;
}

function filterBlockers(f){
  bFilter=f;
  document.getElementById('bfilt-open').style.opacity=f==='open'?1:0.4;
  document.getElementById('bfilt-all').style.opacity=f==='all'?1:0.4;
  renderBlog();
}

async function resolveBlk(id){
  const note=(document.getElementById('bres-'+id)||{}).value||'';
  try{await db.from('blockers').update({resolved:true,resolution:note}).eq('id',id);showToast('‚úì Blocker resolved');await loadB();renderBlog();renderSideBlk();renderAlerts();renderFounders();renderHealth();}catch(e){showToast('Error: '+e.message);}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REPORTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderReports(){
  const feed=document.getElementById('reports-feed');
  if(!allReports.length){feed.innerHTML='<div class="empty-st"><div class="empty-ico">üìã</div>No reports yet.</div>';return;}
  feed.innerHTML=allReports.map(r=>{
    const d=new Date(r.created_at);
    const ds=d.toLocaleDateString('en-US',{month:'short',day:'numeric'})+' ¬∑ W'+(r.week||'?');
    return `<div class="rep-card">
      <div class="rep-hdr"><div class="rep-role ${r.role}">${r.role} <span style="color:var(--muted);font-size:10px;font-weight:400">(${r.role==='Filipe'?'CRO':r.role==='Loa'?'CCO':'COO'})</span></div><div class="rep-time">${ds}</div></div>
      ${r.outputs?`<div class="rfl">Outputs</div><div class="rfv">${r.outputs}</div>`:''}
      ${r.learnings?`<div class="rfl">Learnings</div><div class="rfv">${r.learnings}</div>`:''}
      ${r.blockers?`<div class="rfl">Blockers</div><div class="rfv" style="color:var(--yellow)">${r.blockers}</div>`:''}
      ${r.metrics?`<div class="rfl">Metrics</div><div class="rfv">${r.metrics}</div>`:''}
      ${r.commitments?`<div class="rfl">Next Week</div><div class="rfv" style="color:var(--green)">${r.commitments}</div>`:''}
    </div>`;
  }).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SUBMIT REPORT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function submitReport(){
  const role=document.getElementById('f-role').value;
  const outputs=document.getElementById('f-out').value.trim();
  const blockersText=document.getElementById('f-blk').value.trim();
  if(!outputs){showToast('‚ö† Outputs required');return;}
  const week=getCW();
  try{
    await db.from('founder_reports').insert([{role,outputs,learnings:document.getElementById('f-learn').value.trim(),blockers:blockersText,metrics:document.getElementById('f-met').value.trim(),commitments:document.getElementById('f-com').value.trim(),week}]);
    if(blockersText.trim()){
      const pts=blockersText.split('‚Üí').map(s=>s.trim());
      await db.from('blockers').insert([{filed_by:role,description:blockersText,assigned_to:pts[1]||'',deadline:pts[2]||'',week,resolved:false}]);
    }
    showToast('‚úì Report submitted');
    ['f-out','f-learn','f-blk','f-met','f-com'].forEach(i=>document.getElementById(i).value='');
    await Promise.all([loadR(),loadB()]);
    renderAll();
    switchTab('reports',document.querySelectorAll('.tab')[4]);
  }catch(e){showToast('Error: '+e.message);}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PARTNERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderPartners(){
  const signed=allPartners.filter(p=>p.stage==='Signed'||p.stage==='Active');
  const sc={'Outreach':'var(--muted)','Discovery Call':'var(--blue)','Offer Sent':'var(--yellow)','Signed':'var(--green)','Active':'var(--green)'};
  document.getElementById('pslots').innerHTML=Array.from({length:5},(_,i)=>{const p=signed[i];return p?`<div class="pslot filled">‚úì ${p.name.split(' ')[0]}</div>`:`<div class="pslot">${i+1}</div>`;}).join('');
  document.getElementById('plist').innerHTML=allPartners.length?allPartners.map(p=>`
    <div style="display:flex;align-items:center;gap:10px;padding:9px 12px;background:var(--surface2);border:1px solid var(--border);border-radius:5px;margin-bottom:7px;font-size:12px;">
      <div style="width:7px;height:7px;border-radius:50%;background:${sc[p.stage]||'var(--muted)'};flex-shrink:0;"></div>
      <div style="flex:1;font-weight:600;">${p.name}</div>
      ${p.contact?`<div style="color:var(--muted);font-size:11px;">${p.contact}</div>`:''}
      <div style="font-family:var(--font-mono);font-size:8px;color:${sc[p.stage]||'var(--muted)'}">${p.stage}</div>
      <button class="btn-del" onclick="delPartner(${p.id})">‚úï</button>
    </div>
  `).join(''):'<div class="empty-st"><div class="empty-ico">üéØ</div>No design partners yet.</div>';
}

function renderLaunch(){
  const signed=allPartners.filter(p=>p.stage==='Signed'||p.stage==='Active').length;
  const items=[
    {l:'5 companies paid/active',done:signed>=5},
    {l:'Before/after metrics documented',done:false},
    {l:'Onboarding repeatable (3+ runs)',done:false},
    {l:'Sales script converts consistently',done:false},
    {l:'Compliance logic proven manually',done:false},
    {l:'All 3 founders filing weekly (4wk streak)',done:calcStreak('Filipe')>=4&&calcStreak('Loa')>=4&&calcStreak('Clinton')>=4},
    {l:'First design partner closed',done:signed>=1},
    {l:'Final pricing locked',done:false},
  ];
  const done=items.filter(i=>i.done).length;
  document.getElementById('launch-chk').innerHTML=`
    <div style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:16px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><div style="font-weight:700;">Engineer Hire Readiness</div><div style="font-family:var(--font-mono);color:${done>=6?'var(--green)':'var(--yellow)'};">${done}/${items.length}</div></div>
      <div class="prog-wrap"><div class="prog-fill" style="width:${(done/items.length)*100}%"></div></div>
      ${items.map(it=>`<div class="chk-item"><span class="chk-icon" style="color:${it.done?'var(--green)':'var(--muted)'}">${it.done?'‚úì':'‚óã'}</span><span class="chk-text ${it.done?'done':''}">${it.l}</span></div>`).join('')}
    </div>
  `;
}

function openPartnerModal(){document.getElementById('partner-modal').classList.add('active');selPStage='';['p-name','p-contact','p-notes'].forEach(i=>document.getElementById(i).value='');document.querySelectorAll('#partner-stage-opts .sopt').forEach(b=>b.classList.remove('active'));}
function selStage(el,s){selPStage=s;document.querySelectorAll('#partner-stage-opts .sopt').forEach(b=>b.classList.remove('active'));el.classList.add('active');}

async function savePartner(){
  const name=document.getElementById('p-name').value.trim();
  if(!name){showToast('‚ö† Name required');return;}
  if(!selPStage){showToast('‚ö† Select stage');return;}
  try{await db.from('design_partners').insert([{name,contact:document.getElementById('p-contact').value,stage:selPStage,notes:document.getElementById('p-notes').value}]);showToast('‚úì Partner added');closeModal('partner-modal');await loadP();renderPartners();renderHealth();renderLaunch();}catch(e){showToast('Error: '+e.message);}
}

async function delPartner(id){try{await db.from('design_partners').delete().eq('id',id);await loadP();renderPartners();renderHealth();showToast('Removed');}catch(e){showToast('Error: '+e.message);}}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ALERTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAlerts(){
  const alerts=[];const cw=getCW();const tw=allReports.filter(r=>r.week===cw);
  ['Filipe','Loa','Clinton'].forEach(role=>{
    if(!tw.find(r=>r.role===role))alerts.push({i:'‚ö†Ô∏è',t:`${role} hasn't filed Week ${cw} report`,s:'red'});
    const st=calcStreak(role);
    if(st===0&&cw>1)alerts.push({i:'üî¥',t:`${role} streak broken`,s:'red'});
    else if(st===1&&cw>2)alerts.push({i:'üü°',t:`${role} streak at risk (1 week)`,s:'yellow'});
  });
  const signed=allPartners.filter(p=>p.stage==='Signed'||p.stage==='Active').length;
  if(cw>=4&&signed===0)alerts.push({i:'üö®',t:'No signed partners ‚Äî Week 4+ requires first close',s:'red'});
  const stale=allDeals.filter(d=>{if(d.stage==='Closed Won'||d.stage==='Closed Lost')return false;const days=d.last_touched?Math.floor((new Date()-new Date(d.last_touched))/864e5):999;return days>5;});
  if(stale.length)alerts.push({i:'üìû',t:`${stale.length} deal(s) stale 5+ days: ${stale.map(d=>d.name).join(', ')}`,s:'red'});
  const ob=allBlockers.filter(b=>!b.resolved).length;
  if(ob>=3)alerts.push({i:'üß±',t:`${ob} unresolved blockers ‚Äî team blocked`,s:'red'});
  const c=document.getElementById('alerts-list');
  c.innerHTML=alerts.length?alerts.map(a=>`
    <div class="alert-item"><div class="alert-icon">${a.i}</div>
    <div><div class="alert-txt">${a.t}</div><div class="alert-meta" style="color:${a.s==='red'?'var(--red)':'var(--yellow)'}">${a.s==='red'?'ACTION REQUIRED':'WATCH'}</div></div></div>
  `).join(''):'<div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);text-align:center;padding:12px 0;">‚úÖ No alerts</div>';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COMMITMENTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateWkNav(){document.getElementById('wknav-lbl').textContent='WEEK '+Math.max(1,getCW()+weekOffset);}
function shiftWeek(d){weekOffset+=d;updateWkNav();renderCommits();}

function renderCommits(){
  const w=getCW()+weekOffset;
  const wrs=allReports.filter(r=>r.week===w&&r.commitments);
  const key=`revos_cm_w${w}`;let chk={};try{chk=JSON.parse(localStorage.getItem(key)||'{}');}catch(e){}
  const panel=document.getElementById('commits-panel');
  if(!wrs.length){panel.innerHTML=`<div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);text-align:center;padding:12px 0;">No commitments for week ${w}</div>`;return;}
  panel.innerHTML=wrs.map(r=>{
    const lines=r.commitments.split('\n').filter(l=>l.trim());
    return `<div class="cm-block"><div class="cm-role">${r.role.toUpperCase()}</div>
    ${lines.map((ln,i)=>{const k=`${r.id}_${i}`;const done=chk[k];return`<div class="cm-item" onclick="toggleCm('${key}','${k}',this)"><input type="checkbox" ${done?'checked':''} onclick="event.stopPropagation();toggleCm('${key}','${k}',this.parentElement)"><div class="cm-txt ${done?'done':''}">${ln.replace(/^[-‚Ä¢*]\s*/,'')}</div></div>`;}).join('')}
    </div>`;
  }).join('');
}

function toggleCm(key,k,el){let c={};try{c=JSON.parse(localStorage.getItem(key)||'{}');}catch(e){}c[k]=!c[k];localStorage.setItem(key,JSON.stringify(c));renderCommits();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SIDEBAR BLOCKERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderSideBlk(){
  const open=allBlockers.filter(b=>!b.resolved);
  document.getElementById('sidebar-blk').innerHTML=open.length?open.map(b=>`
    <div style="background:rgba(255,204,0,.05);border:1px solid rgba(255,204,0,.18);border-radius:5px;padding:9px 11px;margin-bottom:7px;">
      <div style="font-family:var(--font-mono);font-size:8px;color:var(--yellow);margin-bottom:3px;">${(b.filed_by||'').toUpperCase()} ‚Üí ${b.assigned_to||'?'}</div>
      <div style="font-size:11px;line-height:1.4;">${b.description}</div>
      ${b.deadline?`<div style="font-family:var(--font-mono);font-size:8px;color:var(--muted);margin-top:3px;">Due: ${b.deadline}</div>`:''}
    </div>
  `).join(''):'<div style="font-family:var(--font-mono);font-size:9px;color:var(--muted);text-align:center;padding:12px 0;">No open blockers</div>';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MONDAY MEETING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const MPHASES=[
  {name:'Metrics Review',mins:10,desc:'Read the numbers. No discussion.',rules:['Each founder states 3 key numbers only','No context unless asked','Red metric = noted, not debated']},
  {name:'Commitments Check',mins:10,desc:'Last week\'s commitments: done or not done. Binary.',rules:['No partial credit','Miss twice = change the commitment','No excuses ‚Äî just the result']},
  {name:'Blockers',mins:15,desc:'Every blocker must leave with an owner and a deadline.',rules:['Problem ‚Üí Owner ‚Üí Deadline format only','No problem without assigning a solver','Can\'t assign it? It\'s a task, not a blocker']},
  {name:'Next Week Commitments',mins:10,desc:'Each founder: 3 deliverables. Not tasks.',rules:['Bad: "Work on website"','Good: "Homepage live with pipeline diagram"','Write it in the dashboard before meeting ends']}
];

let mPhase=0,mTimer=null,mSecs=0,mRunning=false;

function initMeeting(){renderMeeting();}

function renderMeeting(){
  document.getElementById('meet-prog').innerHTML=MPHASES.map((_,i)=>`<div class="meet-seg ${i<mPhase?'done':i===mPhase?'active':''}" id="mseg-${i}"></div>`).join('');
  document.getElementById('meet-phases').innerHTML=MPHASES.map((p,i)=>{
    const cur=i===mPhase,done=i<mPhase;
    const s=cur?mSecs:p.mins*60;
    const mm=String(Math.floor(s/60)).padStart(2,'0'),ss=String(s%60).padStart(2,'0');
    return `<div class="meet-phase ${cur?'active':''} ${done?'done':''}" onclick="jumpPhase(${i})">
      <div class="mp-hdr"><div class="mp-name">${done?'‚úì ':''} ${i+1}. ${p.name}</div><div class="mp-alloc">${p.mins} min</div></div>
      ${cur?`<div class="mp-cd" id="meet-cd">${mm}:${ss}</div>`:''}
      <div class="mp-desc">${p.desc}</div>
      <div>${p.rules.map(r=>`<div class="mp-rule">${r}</div>`).join('')}</div>
    </div>`;
  }).join('');
  const btn=document.getElementById('meet-start-btn');
  if(btn) btn.textContent=mRunning?'PAUSE':mPhase>=MPHASES.length?'COMPLETE ‚úì':'START TIMER';
}

function openMeeting(){document.getElementById('meet-modal').classList.add('active');if(mSecs===0)mSecs=MPHASES[0].mins*60;renderMeeting();}

function meetingAction(){
  if(mPhase>=MPHASES.length){resetMeeting();return;}
  mRunning=!mRunning;
  if(mRunning){mTimer=setInterval(()=>{mSecs--;updateCd();if(mSecs<=0)skipPhase();},1000);}
  else clearInterval(mTimer);
  renderMeeting();
}

function updateCd(){
  const el=document.getElementById('meet-cd');if(!el)return;
  const mm=String(Math.floor(mSecs/60)).padStart(2,'0'),ss=String(mSecs%60).padStart(2,'0');
  el.textContent=`${mm}:${ss}`;
  el.style.color=mSecs<=60?'var(--red)':mSecs<=180?'var(--yellow)':'var(--purple)';
}

function skipPhase(){clearInterval(mTimer);mRunning=false;mPhase++;if(mPhase<MPHASES.length)mSecs=MPHASES[mPhase].mins*60;renderMeeting();}
function jumpPhase(i){clearInterval(mTimer);mRunning=false;mPhase=i;mSecs=MPHASES[i].mins*60;renderMeeting();}
function resetMeeting(){clearInterval(mTimer);mRunning=false;mPhase=0;mSecs=MPHASES[0].mins*60;renderMeeting();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TABS / UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function switchTab(name,btn){
  document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('tab-'+name).classList.add('active');
  if(btn)btn.classList.add('active');
}

function closeModal(id){document.getElementById(id).classList.remove('active');}

function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// REALTIME
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function subscribe(){
  try{db.channel('revos-all')
    .on('postgres_changes',{event:'*',schema:'public',table:'founder_reports'},async()=>{await loadR();renderAll();})
    .on('postgres_changes',{event:'*',schema:'public',table:'design_partners'},async()=>{await loadP();renderPartners();renderHealth();renderLaunch();})
    .on('postgres_changes',{event:'*',schema:'public',table:'deals'},async()=>{await loadD();renderPipe();renderHealth();renderAlerts();renderFounders();})
    .on('postgres_changes',{event:'*',schema:'public',table:'blockers'},async()=>{await loadB();renderBlog();renderSideBlk();renderAlerts();renderFounders();renderHealth();})
    .subscribe();
  }catch(e){console.warn('RT:',e.message);}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// START
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
init();
</script>
</body>
</html>
